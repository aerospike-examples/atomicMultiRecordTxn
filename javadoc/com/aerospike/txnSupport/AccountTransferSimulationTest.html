<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (10.0.1) on Thu Jul 16 09:53:52 BST 2020 -->
<title>AccountTransferSimulationTest</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="date" content="2020-07-16">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-1.10.2.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AccountTransferSimulationTest";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":9,"i10":10,"i11":10,"i12":10,"i13":9,"i14":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/aerospike/txnSupport/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/aerospike/txnSupport/AccountTransferSimulationTest.html" target="_top">Frames</a></li>
<li><a href="AccountTransferSimulationTest.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="../../../com/aerospike/txnSupport/package-summary.html">com.aerospike.txnSupport</a></div>
<h2 title="Class AccountTransferSimulationTest" class="title">Class AccountTransferSimulationTest</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.aerospike.txnSupport.AccountTransferSimulationTest</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">AccountTransferSimulationTest</span>
extends java.lang.Object</pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.AccountExistsException</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.SingleTransaction.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.SingleTransaction</a></span></code></th>
<td class="colLast">
<div class="block">Runnable object used to support banking simulation
 Object executes one transaction</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.TestFailedException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.TestFailedException</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#ACCOUNT_ID_BIN_NAME">ACCOUNT_ID_BIN_NAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#BALANCE_PENCE_BIN_NAME">BALANCE_PENCE_BIN_NAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#DEFAULT_ACCOUNT_DIGITS">DEFAULT_ACCOUNT_DIGITS</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#DEFAULT_ACCOUNT_PREFIX">DEFAULT_ACCOUNT_PREFIX</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#DEFAULT_BALANCE_AMOUNT_PENCE">DEFAULT_BALANCE_AMOUNT_PENCE</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#DEFAULT_MAX_TRANSFER_AMOUNT">DEFAULT_MAX_TRANSFER_AMOUNT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#DEFAULT_NO_OF_ACCOUNTS">DEFAULT_NO_OF_ACCOUNTS</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#DEFAULT_SIMULATION_SET_NAME">DEFAULT_SIMULATION_SET_NAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#INITIAL_BALANCE_PENCE_BIN_NAME">INITIAL_BALANCE_PENCE_BIN_NAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#NO_OF_ACCOUNTS_BIN_NAME">NO_OF_ACCOUNTS_BIN_NAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#SIMULATION_DETAIL_SET">SIMULATION_DETAIL_SET</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#SIMULATION_DETAIL_USER_KEY">SIMULATION_DETAIL_USER_KEY</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#SIMULATION_RECORD_TYPE">SIMULATION_RECORD_TYPE</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#AccountTransferSimulationTest-com.aerospike.txnSupport.AerospikeClientWithTxnSupport-java.lang.String-int-int-">AccountTransferSimulationTest</a></span>&#8203;(<a href="../../../com/aerospike/txnSupport/AerospikeClientWithTxnSupport.html" title="class in com.aerospike.txnSupport">AerospikeClientWithTxnSupport</a>&nbsp;client,
                             java.lang.String&nbsp;namespace,
                             int&nbsp;noOfAccounts,
                             int&nbsp;initialBalanceAmountPence)</code></th>
<td class="colLast">
<div class="block">Create object that will manage the account transfer simulation</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#accountIDFromInt-int-">accountIDFromInt</a></span>&#8203;(int&nbsp;accountNo)</code></th>
<td class="colLast">
<div class="block">Account id as string from an integer value</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>com.aerospike.client.Key</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#accountKey-int-">accountKey</a></span>&#8203;(int&nbsp;accountID)</code></th>
<td class="colLast">
<div class="block">Database key for account record given account id as integer</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>com.aerospike.client.Key</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#accountKey-java.lang.String-">accountKey</a></span>&#8203;(java.lang.String&nbsp;accountID)</code></th>
<td class="colLast">
<div class="block">Database key for account record, given account id as string</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#batchInitializeAccountBalances--">batchInitializeAccountBalances</a></span>()</code></th>
<td class="colLast">
<div class="block">Initalize all account balances in simulation, using defaults for number of accounts and initial balance</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#createAccountBalance-java.lang.String-int-">createAccountBalance</a></span>&#8203;(java.lang.String&nbsp;accountID,
                    int&nbsp;balanceInPence)</code></th>
<td class="colLast">
<div class="block">Initialize an account balance</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#getExpectedMoneyInSimulation--">getExpectedMoneyInSimulation</a></span>()</code></th>
<td class="colLast">
<div class="block">Get expected money in simulation ( should be what we started with )</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#getMaxTransferAmount--">getMaxTransferAmount</a></span>()</code></th>
<td class="colLast">
<div class="block">Max transfer amount used in simulation, in pence</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#getNoOfAccounts--">getNoOfAccounts</a></span>()</code></th>
<td class="colLast">
<div class="block">No of accounts set up by simulation</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#getTotalMoneyInSimulation--">getTotalMoneyInSimulation</a></span>()</code></th>
<td class="colLast">
<div class="block">Get total money in simulation ( sum all balances )</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#main-java.lang.String:A-">main</a></span>&#8203;(java.lang.String[]&nbsp;args)</code></th>
<td class="colLast">
<div class="block">We simulate a banking transaction environment
 We create 1000 accounts and 100 threads
 Each thread picks two accounts at random and transfers money between then atomically
 This is iterated over 100 times
 If we cannot get the required locks, the transactions are cancelled
 At the end of the simulation we check that the money we started with is equal to the current money
 If this is not true, throw an exception</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#removeAccounts--">removeAccounts</a></span>()</code></th>
<td class="colLast">
<div class="block">Remove all account records</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#removeState--">removeState</a></span>()</code></th>
<td class="colLast">
<div class="block">Remove simulation state record</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#saveState--">saveState</a></span>()</code></th>
<td class="colLast">
<div class="block">Persist simulation state - used by ConsistentAfterFailureTest test</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>(package private) static com.aerospike.client.Key</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#stateKey-java.lang.String-">stateKey</a></span>&#8203;(java.lang.String&nbsp;namespace)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.html#transfer-java.lang.String-java.lang.String-int-">transfer</a></span>&#8203;(java.lang.String&nbsp;fromAccount,
        java.lang.String&nbsp;toAccount,
        int&nbsp;amountPence)</code></th>
<td class="colLast">
<div class="block">Transfer amountPence atomically from fromAccount to toAccount</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_NO_OF_ACCOUNTS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_NO_OF_ACCOUNTS</h4>
<pre>public static final&nbsp;int DEFAULT_NO_OF_ACCOUNTS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.DEFAULT_NO_OF_ACCOUNTS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_SIMULATION_SET_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_SIMULATION_SET_NAME</h4>
<pre>public static final&nbsp;java.lang.String DEFAULT_SIMULATION_SET_NAME</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.DEFAULT_SIMULATION_SET_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_ACCOUNT_DIGITS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_ACCOUNT_DIGITS</h4>
<pre>public static final&nbsp;int DEFAULT_ACCOUNT_DIGITS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.DEFAULT_ACCOUNT_DIGITS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_ACCOUNT_PREFIX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_ACCOUNT_PREFIX</h4>
<pre>public static final&nbsp;java.lang.String DEFAULT_ACCOUNT_PREFIX</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.DEFAULT_ACCOUNT_PREFIX">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_BALANCE_AMOUNT_PENCE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_BALANCE_AMOUNT_PENCE</h4>
<pre>public static final&nbsp;int DEFAULT_BALANCE_AMOUNT_PENCE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.DEFAULT_BALANCE_AMOUNT_PENCE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_MAX_TRANSFER_AMOUNT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_TRANSFER_AMOUNT</h4>
<pre>public static final&nbsp;int DEFAULT_MAX_TRANSFER_AMOUNT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.DEFAULT_MAX_TRANSFER_AMOUNT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ACCOUNT_ID_BIN_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ACCOUNT_ID_BIN_NAME</h4>
<pre>public static final&nbsp;java.lang.String ACCOUNT_ID_BIN_NAME</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.ACCOUNT_ID_BIN_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="BALANCE_PENCE_BIN_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BALANCE_PENCE_BIN_NAME</h4>
<pre>public static final&nbsp;java.lang.String BALANCE_PENCE_BIN_NAME</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.BALANCE_PENCE_BIN_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SIMULATION_RECORD_TYPE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SIMULATION_RECORD_TYPE</h4>
<pre>public static final&nbsp;java.lang.String SIMULATION_RECORD_TYPE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.SIMULATION_RECORD_TYPE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SIMULATION_DETAIL_USER_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SIMULATION_DETAIL_USER_KEY</h4>
<pre>public static final&nbsp;java.lang.String SIMULATION_DETAIL_USER_KEY</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.SIMULATION_DETAIL_USER_KEY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NO_OF_ACCOUNTS_BIN_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_OF_ACCOUNTS_BIN_NAME</h4>
<pre>public static final&nbsp;java.lang.String NO_OF_ACCOUNTS_BIN_NAME</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.NO_OF_ACCOUNTS_BIN_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="INITIAL_BALANCE_PENCE_BIN_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INITIAL_BALANCE_PENCE_BIN_NAME</h4>
<pre>public static final&nbsp;java.lang.String INITIAL_BALANCE_PENCE_BIN_NAME</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.INITIAL_BALANCE_PENCE_BIN_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SIMULATION_DETAIL_SET">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SIMULATION_DETAIL_SET</h4>
<pre>public static final&nbsp;java.lang.String SIMULATION_DETAIL_SET</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.aerospike.txnSupport.AccountTransferSimulationTest.SIMULATION_DETAIL_SET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AccountTransferSimulationTest-com.aerospike.txnSupport.AerospikeClientWithTxnSupport-java.lang.String-int-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AccountTransferSimulationTest</h4>
<pre>public&nbsp;AccountTransferSimulationTest&#8203;(<a href="../../../com/aerospike/txnSupport/AerospikeClientWithTxnSupport.html" title="class in com.aerospike.txnSupport">AerospikeClientWithTxnSupport</a>&nbsp;client,
                                     java.lang.String&nbsp;namespace,
                                     int&nbsp;noOfAccounts,
                                     int&nbsp;initialBalanceAmountPence)</pre>
<div class="block">Create object that will manage the account transfer simulation</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>client</code> - - AerospikeClient object to manage persistence of simulation</dd>
<dd><code>namespace</code> - - namespace used for simulation</dd>
<dd><code>noOfAccounts</code> - - number of accounts created by simulation</dd>
<dd><code>initialBalanceAmountPence</code> - - initial balance of each account</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getNoOfAccounts--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNoOfAccounts</h4>
<pre>public&nbsp;int&nbsp;getNoOfAccounts()</pre>
<div class="block">No of accounts set up by simulation</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of accounts in simulation</dd>
</dl>
</li>
</ul>
<a name="getMaxTransferAmount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxTransferAmount</h4>
<pre>public&nbsp;int&nbsp;getMaxTransferAmount()</pre>
<div class="block">Max transfer amount used in simulation, in pence</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>int</dd>
</dl>
</li>
</ul>
<a name="createAccountBalance-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAccountBalance</h4>
<pre>public&nbsp;void&nbsp;createAccountBalance&#8203;(java.lang.String&nbsp;accountID,
                                 int&nbsp;balanceInPence)
                          throws <a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.AccountExistsException</a></pre>
<div class="block">Initialize an account balance</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>accountID</code> - - account ID</dd>
<dd><code>balanceInPence</code> - - balance in pence</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.AccountExistsException</a></code> - if account already exists</dd>
</dl>
</li>
</ul>
<a name="batchInitializeAccountBalances--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>batchInitializeAccountBalances</h4>
<pre>public&nbsp;void&nbsp;batchInitializeAccountBalances()
                                    throws <a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.AccountExistsException</a></pre>
<div class="block">Initalize all account balances in simulation, using defaults for number of accounts and initial balance</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.AccountExistsException</a></code> - if account already exists</dd>
</dl>
</li>
</ul>
<a name="removeAccounts--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAccounts</h4>
<pre>public&nbsp;void&nbsp;removeAccounts()</pre>
<div class="block">Remove all account records</div>
</li>
</ul>
<a name="accountKey-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accountKey</h4>
<pre>public&nbsp;com.aerospike.client.Key&nbsp;accountKey&#8203;(java.lang.String&nbsp;accountID)</pre>
<div class="block">Database key for account record, given account id as string</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>accountID</code> - - account id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Database key</dd>
</dl>
</li>
</ul>
<a name="accountKey-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accountKey</h4>
<pre>public&nbsp;com.aerospike.client.Key&nbsp;accountKey&#8203;(int&nbsp;accountID)</pre>
<div class="block">Database key for account record given account id as integer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>accountID</code> - - account id as int</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Database key</dd>
</dl>
</li>
</ul>
<a name="accountIDFromInt-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accountIDFromInt</h4>
<pre>public&nbsp;java.lang.String&nbsp;accountIDFromInt&#8203;(int&nbsp;accountNo)</pre>
<div class="block">Account id as string from an integer value</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>accountNo</code> - - integer identifying an account</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>account id as a string</dd>
</dl>
</li>
</ul>
<a name="transfer-java.lang.String-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transfer</h4>
<pre>public&nbsp;void&nbsp;transfer&#8203;(java.lang.String&nbsp;fromAccount,
                     java.lang.String&nbsp;toAccount,
                     int&nbsp;amountPence)
              throws <a href="../../../com/aerospike/txnSupport/TxnSupport.LockAcquireException.html" title="class in com.aerospike.txnSupport">TxnSupport.LockAcquireException</a></pre>
<div class="block">Transfer amountPence atomically from fromAccount to toAccount</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fromAccount</code> - - account from which money will be transferred</dd>
<dd><code>toAccount</code> - - account to which money will be transferred</dd>
<dd><code>amountPence</code> - - transfer amount</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/aerospike/txnSupport/TxnSupport.LockAcquireException.html" title="class in com.aerospike.txnSupport">TxnSupport.LockAcquireException</a></code> - if either of the accounts is currently locked</dd>
</dl>
</li>
</ul>
<a name="getTotalMoneyInSimulation--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotalMoneyInSimulation</h4>
<pre>public&nbsp;long&nbsp;getTotalMoneyInSimulation()</pre>
<div class="block">Get total money in simulation ( sum all balances )</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>total amount of money summed across all accounts in simulation</dd>
</dl>
</li>
</ul>
<a name="getExpectedMoneyInSimulation--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExpectedMoneyInSimulation</h4>
<pre>public&nbsp;long&nbsp;getExpectedMoneyInSimulation()</pre>
<div class="block">Get expected money in simulation ( should be what we started with )</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>expected amount of money in simulation as long</dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main&#8203;(java.lang.String[]&nbsp;args)
                 throws <a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.AccountExistsException</a>,
                        java.lang.InterruptedException,
                        <a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.TestFailedException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.TestFailedException</a></pre>
<div class="block">We simulate a banking transaction environment
 We create 1000 accounts and 100 threads
 Each thread picks two accounts at random and transfers money between then atomically
 This is iterated over 100 times
 If we cannot get the required locks, the transactions are cancelled
 At the end of the simulation we check that the money we started with is equal to the current money
 If this is not true, throw an exception</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - - command line arguments - see usage</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.AccountExistsException</a></code> - - if accounts already exist. Generally this means an incomplete simulation has been run</dd>
<dd><code>java.lang.InterruptedException</code> - - we wait for threads - this can in theory happen</dd>
<dd><code><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.TestFailedException.html" title="class in com.aerospike.txnSupport">AccountTransferSimulationTest.TestFailedException</a></code> - - test failed for some reason</dd>
</dl>
</li>
</ul>
<a name="saveState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveState</h4>
<pre>public&nbsp;void&nbsp;saveState()</pre>
<div class="block">Persist simulation state - used by ConsistentAfterFailureTest test</div>
</li>
</ul>
<a name="removeState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeState</h4>
<pre>public&nbsp;void&nbsp;removeState()</pre>
<div class="block">Remove simulation state record</div>
</li>
</ul>
<a name="stateKey-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>stateKey</h4>
<pre>static&nbsp;com.aerospike.client.Key&nbsp;stateKey&#8203;(java.lang.String&nbsp;namespace)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/aerospike/txnSupport/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../com/aerospike/txnSupport/AccountTransferSimulationTest.AccountExistsException.html" title="class in com.aerospike.txnSupport"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/aerospike/txnSupport/AccountTransferSimulationTest.html" target="_top">Frames</a></li>
<li><a href="AccountTransferSimulationTest.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
